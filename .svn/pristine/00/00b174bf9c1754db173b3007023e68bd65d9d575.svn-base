<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>

<%@ include file="../../layout/head.jsp" %>
<!-- Form -->
<el-container class="secondNav">
    <div class="title" @click="isCollapse = !isCollapse">买车咨询</div>
    <!--<el-radio-group v-model="isCollapse" style="margin-bottom: 20px;">-->
    <!--<el-radio-button :label="false">展开</el-radio-button>-->
    <!--<el-radio-button :label="true">收起</el-radio-button>-->
    <!--</el-radio-group>-->
    <el-button class="btn" type="primary" @click="dialogFormVisible = true" icon="el-icon-plus"
               round>添加
    </el-button>
    <el-dialog title="车辆信息" :visible.sync="dialogFormVisible">
        <el-form :model="ruleForm" :rules="rules" ref="ruleForm" label-width="100px"
                 class="demo-ruleForm">
            <el-row>
                <el-col :span="12">
                    <el-form-item label="姓名：" prop="name">
                        <el-input v-model="ruleForm.name"></el-input>
                    </el-form-item>
                </el-col>
                <el-col :span="12">
                    <el-form-item label="电话：" prop="name">
                        <el-input v-model="ruleForm.name"></el-input>
                    </el-form-item>
                </el-col>
            </el-row>
            <el-form-item label="地址：" prop="name">
                <el-input v-model="ruleForm.name"></el-input>
            </el-form-item>
            <el-form-item label="原车信息："></el-form-item>
            <el-row>
                <el-col :span="12">
                    <el-form-item label="车型：" prop="name">
                        <el-input v-model="ruleForm.name"></el-input>
                    </el-form-item>
                </el-col>
                <el-col :span="12">
                    <el-form-item label="车牌号：" prop="name">
                        <el-input v-model="ruleForm.name"></el-input>
                    </el-form-item>
                </el-col>
                <el-col :span="12">
                    <el-form-item label="使用年限：" prop="name">
                        <el-input v-model="ruleForm.name"></el-input>
                    </el-form-item>
                </el-col>
                <el-col :span="12">
                    <el-form-item label="维修记录：" prop="name">
                        <el-input v-model="ruleForm.name"></el-input>
                    </el-form-item>
                </el-col>
                <el-col :span="12">
                    <el-form-item label="公里数：" prop="name">
                        <el-input v-model="ruleForm.name"></el-input>
                    </el-form-item>
                </el-col>
                <el-col :span="12">
                    <el-form-item label="报价：" prop="name">
                        <el-input v-model="ruleForm.name"></el-input>
                    </el-form-item>
                </el-col>
            </el-row>
            <el-form-item label="新车信息："></el-form-item>
            <el-row>
                <el-col :span="12">
                    <el-form-item label="车型：" prop="name">
                        <el-input v-model="ruleForm.name"></el-input>
                    </el-form-item>
                </el-col>

                <el-col :span="12">
                    <el-form-item label="车牌号：" prop="name">
                        <el-input v-model="ruleForm.name"></el-input>
                    </el-form-item>
                </el-col>
            </el-row>
            <el-form-item label="报价：" prop="name">
                <el-input v-model="ruleForm.name"></el-input>
            </el-form-item>
            <el-form-item label="备注" prop="desc">
                <el-input type="textarea" v-model="ruleForm.desc"></el-input>
            </el-form-item>
            <el-form-item>
                <el-button type="primary" @click="submitForm('ruleForm')">立即创建</el-button>
                <el-button @click="resetForm('ruleForm')">重置</el-button>
            </el-form-item>
        </el-form>
        <!--<div slot="footer" class="dialog-footer">-->
        <!--<el-button @click="dialogFormVisible = false">取 消</el-button>-->
        <!--<el-button type="primary" @click="dialogFormVisible = false">确 定</el-button>-->
        <!--</div>-->
    </el-dialog>
</el-container>

<el-table v-loading="loading2"
          element-loading-text="拼命加载中"
          element-loading-spinner="el-icon-loading"
          :data="tableData.filter(data => !search || data.name.toLowerCase().includes(search.toLowerCase()))"
          style="width: 100%">
    <el-table-column label="创建时间" prop="date"></el-table-column>
    <el-table-column label="姓名" prop="name"></el-table-column>
    <el-table-column label="电话" prop="phone"></el-table-column>
    <el-table-column label="地址" prop="position"></el-table-column>
    <el-table-column label="车型" prop="phone"></el-table-column>
    <el-table-column label="报价" prop="position"></el-table-column>
    <el-table-column align="right">
        <template slot="header" slot-scope="scope">
            <el-input v-model="search" size="mini" placeholder="输入关键字搜索"/>
        </template>
        <template slot-scope="scope">
            <el-button size="mini" @click="handleEdit(scope.$index, scope.row)">查看</el-button>
        </template>
    </el-table-column>
</el-table>
<el-container class="page-box">
    <div class="block">
        <el-pagination
                @current-change="handleCurrentChange"
                layout="prev, pager, next, jumper"
                :total="total">
        </el-pagination>
    </div>
</el-container>

</el-main>
<el-footer>©2018 智莱云 All rights resered 石家庄智莱云信息技术有限公司</el-footer>
</el-container>
</el-container>
</el-container>
</div>
</body>
<script>
    new Vue({
        el: '#app',
        data: function () {
            return {
                navActive: '1-2',
                visible: false,
                isCollapse: false,
                total: 100,
                tableData: [{
                    date: '2016-05-02',
                    name: '???',
                    address: '?????????? 1518 ?'
                }, {
                    date: '2016-05-04',
                    name: '???',
                    address: '?????????? 1517 ?'
                }, {
                    date: '2016-05-01',
                    name: '???',
                    address: '?????????? 1519 ?'
                }, {
                    date: '2016-05-03',
                    name: '???',
                    address: '?????????? 1516 ?'
                }],
                search: '',
                currentPage3: 5,
                loading2: true,
                ruleForm: {
                    name: '',
                    region: '',
                    date1: '',
                    date2: '',
                    delivery: false,
                    type: [],
                    resource: '',
                    desc: ''
                },
                rules: {
                    name: [
                        {required: true, message: '???????', trigger: 'blur'},
                        {min: 3, max: 5, message: '??? 3 ? 5 ???', trigger: 'blur'}
                    ],
                    region: [
                        {required: true, message: '???????', trigger: 'change'}
                    ],
                    date1: [
                        {type: 'date', required: true, message: '?????', trigger: 'change'}
                    ],
                    date2: [
                        {type: 'date', required: true, message: '?????', trigger: 'change'}
                    ],
                    type: [
                        {type: 'array', required: true, message: '???????????', trigger: 'change'}
                    ],
                    resource: [
                        {required: true, message: '???????', trigger: 'change'}
                    ],
                    desc: [
                        {required: true, message: '???????', trigger: 'blur'}
                    ]
                },
                dialogFormVisible: false,
                formLabelWidth: '120px'
            }
        },
        methods: {
            handleOpen(key, keyPath) {
                console.log(key, keyPath);
            },
            handleClose(key, keyPath) {
                console.log(key, keyPath);
            },
            handleRoute(index, indexPath) {
                console.log(index)
                switch (index) {
                    case '1-1' :
                        window.location.href = '/AutoTradeSystem/pages/customerInfo/carResources/carResources.jsp'
                        break
                    case '1-2':
                        window.location.href = '/AutoTradeSystem/pages/customerInfo/buyingCarConsult/buyingCarConsult.jsp'
                        break
                    case '1-3':
                        window.location.href = '/AutoTradeSystem/pages/customerInfo/replaceCar/replaceCar.jsp'
                        break
                }
            },
            handleEdit(index, row) {
                console.log(index, row);
            },
            handleDelete(index, row) {
                console.log(index, row);
            },
            handleCurrentChange(val) {
                console.log(val)
                console.log(`???: ${val}`);
            },
            submitForm(formName) {
                this.$refs[formName].validate((valid) => {
                    if (valid) {
                        alert('submit!');
                    } else {
                        console.log('error submit!!');
                        return false;
                    }
                });
            },
            resetForm(formName) {
                this.$refs[formName].resetFields();
            }
        },
        mounted() {
            setTimeout(() => {
                this.loading2 = false
            }, 2000);
        }
    })
</script>
</html>
