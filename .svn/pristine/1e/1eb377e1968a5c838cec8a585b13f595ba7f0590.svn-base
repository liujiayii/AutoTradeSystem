<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.autotrade.dao.SellCarDao">

	<!-- SQL片段查询所有 -->
	<sql id="find_All">
		id,buying_id,type,first_payment,monthly_supply,monthly_number,insurance,money,create_time,update_time,user
	</sql>


	<!-- 映射结果集 -->
	<resultMap type="com.autotrade.entity.SellCar" id="BaseResultMap">
		<id column="id" jdbcType="BIGINT" property="id" />
		<result column="buying_id" jdbcType="BIGINT" property="buyingId" />
		<result column="type" jdbcType="INTEGER" property="type" />
		<result column="first_payment" jdbcType="DECIMAL" property="firstPayment" />
		<result column="monthly_supply" jdbcType="DECIMAL" property="monthlySupply" />
		<result column="monthly_number" jdbcType="INTEGER" property="monthlyNumber" />
		<result column="insurance" jdbcType="INTEGER" property="insurance" />
		<result column="money" jdbcType="DECIMAL" property="money" />
		<result column="create_time" jdbcType="DATE" property="createTime" />
		<result column="update_time" jdbcType="DATE" property="updateTime" />
		<result column="types" jdbcType="INTEGER" property="types" />
		<!-- <association property="user" javaType="com.autotrade.entity.User"> 
			<id column="id" jdbcType="BIGINT"/> <result column="p_id" jdbcType="BIGINT" 
			property="pId"/> <result column="name" jdbcType="VARCHAR" property="name"/> 
			<result column="post" jdbcType="VARCHAR" property="post"/> <result column="phone" 
			jdbcType="VARCHAR" property="phone"/> <result column="username" jdbcType="VARCHAR" 
			property="userName"/> <result column="password" jdbcType="VARCHAR" property="passWord"/> 
			<result column="status" jdbcType="INTEGER" property="status"/> <result column="key_word" 
			jdbcType="VARCHAR" property="keyWord"/> <result column="address_id" jdbcType="BIGINT" 
			property="addressId"/> <result column="create_time" jdbcType="DATE" property="createTime"/> 
			<result column="update_time" jdbcType="DATE" property="updateTime"/> </association> -->
	</resultMap>


	<!-- 分页查询售车信息 -->
	<!-- List<SellCar> findByLimit(@Param("page")Integer page, @Param("limit") 
		Integer limit); -->
	<!-- <select id="findByLimit" resultMap="BaseResultMap"> select t.*,u.* 
		from t_car_information t join t_user u on t.buying_id=u.id limit #{page},#{limit} 
		</select> -->

	<select id="findByLimit" resultType="com.autotrade.entityVo.SellCarVo">

		select
			u.name,u.phone,a.address,c.vehicle_type,c.first_payment,c.create_time,u.id,c.id as c_id
		from
			t_user u join t_car_information c on u.id=c.buying_id
					 join t_address a on u.address_id = a.id
		limit
			#{page},#{limit}
	</select>

	<!-- 查询售车信息总数量 -->
	<!-- Integer findAllCount(); -->
	<select id="findAllCount" resultType="java.lang.Integer">
		select
			count(id)
		from
			t_car_information
	</select>


	<!-- 通过售车订单Id查询订单信息以及此订单所属用户信息 -->
	<!-- ShowCarVo findById(Integer id); -->
	<select id="findById" resultType="com.autotrade.entityVo.ShowCarVo">
		select
			u.name,u.phone,a.address,c.type,c.first_payment,c.monthly_number,c.monthly_supply,c.insurance,c.id,c.id as c_id
		from
			t_user u join t_car_information c on u.id=c.buying_id
					 join t_address a on u.address_id = a.id
		where
			c.id = #{id}
	</select>







</mapper>