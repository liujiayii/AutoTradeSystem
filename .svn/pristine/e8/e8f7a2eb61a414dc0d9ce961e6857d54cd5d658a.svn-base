package com.autotrade.controller;

import java.util.HashMap;
import java.util.Map;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RestController;

import com.autotrade.service.ByStagesService;
import com.autotrade.service.DetailsInstallmentsService;

/**
 * 分期表控制层
 *
 * @ClassName: ByStagesController

 * @description 
 *
 * @author lujinpeng
 * @createDate 2019年1月29日-上午11:18:35
 */
@RestController
@RequestMapping("/byStages")
public class ByStagesController {

	//分期表接口
	@Autowired
	private ByStagesService byStagesService;
	//分期详情表接口
	@Autowired
	private DetailsInstallmentsService detailsInstallmentsService;
	
	/**
	 * 显示分期管理页数据
	 *
	 * @Title: showByStages
	
	 * @description 
	 *
	 * @param page 当前页
	 * @param size 每页显示条数
	 * @return String
	 *
	 * @author lujinpeng
	 * @createDate 2019年1月29日-上午11:33:15
	 */
	@RequestMapping("/showByStages")
	public String showByStages (Integer page, Integer limit) {
		if(page <= 0 || page == null){
			page = 1;
		}
		page = (page - 1) * limit;
		
		Map<String, Object> map = new HashMap<> ();
		map.put("page", page);
		map.put("size", limit);
		
		return byStagesService.selectByLimit(map);
	}
	
	/**
	 * 显示分期详情信息
	 *
	 * @Title: showDetailsByStages
	
	 * @description 
	 *
	 * @param id
	 * @param page
	 * @param limit
	 * @return 
	   
	 * String
	 *
	 * @author lujinpeng
	 * @createDate 2019年1月30日-下午4:26:35
	 */
	@RequestMapping("/showDetailsByStages")
	public String showDetailsByStages(Integer id, Integer page, Integer limit) {
		if(page <= 0 || page == null){
			page = 1;
		}
		page = (page - 1) * limit;
		
		Map<String, Object> map = new HashMap<> ();
		map.put("id", id);
		map.put("page", page);
		map.put("size", limit);
		
		return detailsInstallmentsService.selectDetailsInstallments(map);
	}	
	
	/**
	 * 显示分期数据对应买车客户信息
	 *
	 * @Title: showBuyingCustomer
	
	 * @description 
	 *
	 * @param id 分期表主键id
	 * @return 
	 * String
	 *
	 * @author lujinpeng
	 * @createDate 2019年1月30日-下午5:07:40
	 */
	@RequestMapping("/showBuyingCustomer")
	public String showBuyingCustomer(Long id) {
		
		return byStagesService.selectBuyingCustomer(id);
	}
}
